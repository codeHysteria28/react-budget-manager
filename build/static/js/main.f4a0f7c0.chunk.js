(this["webpackJsonpbudget-manager"]=this["webpackJsonpbudget-manager"]||[]).push([[0],{129:function(e,t,n){},191:function(e,t,n){"use strict";n.r(t);var s=n(5),a=(n(95),n(96),n(97),n(1)),r=n.n(a),c=n(23),i=n.n(c),o=n(63),l=n.n(o),d=n(86),u=n(26),j=n(27),b=n(29),h=n(28),m=n(7),p=(n(129),n(17)),x=n.n(p),g=n(14),O=n.n(g),f=n(41),w=n.n(f),y=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).errors=function(e,t,n){""===e&&s.setState({usernameErr:"Username cannot be empty"}),e.length<=5&&s.setState({usernameErr:"Username must be longer then 5 characters"}),""===t&&s.setState({passErr:"Password cannot be empty"}),t.length<=5&&s.setState({passErr:"Password must be longer then 5 characters"}),""===n&&s.setState({conf_password:"Password confirmation cannot be empty"}),n!==t&&s.setState({conf_password:"Passwords must match"})},s.signup=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s.setState({usernameErr:""}),s.setState({passErr:""}),s.setState({conf_password:""}),e.prev=4,n=new FormData(t.target),a={},n.forEach((function(e,t){a[t]=e})),e.next=10,s.errors(a.username,a.password,a.conf_password);case 10:if(""===s.state.usernameErr&&""===s.state.passErr&&""===s.state.conf_password){e.next=14;break}return e.abrupt("return",!1);case 14:x.a.post("/register",a).then((function(e){"success"===e.data?O.a.fire({icon:"success",title:"Registration was successful!",confirmButtonText:"Continue"}).then((function(e){window.location="/login"})):O.a.fire({icon:"error",title:"Something went wrong with registration, please try again.",text:"".concat(e.data)})}));case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),console.log(e.t0),O.a.fire({icon:"error",title:"Something went wrong, please try again."});case 21:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(t){return e.apply(this,arguments)}}(),s.login_screen=function(){window.location="/login"},s.state={usernameErr:"",passErr:"",conf_password:""},s}return Object(j.a)(n,[{key:"render",value:function(){return Object(s.jsx)(m.e,{className:"signup_cont",children:Object(s.jsx)(m.w,{className:"signup_row",children:Object(s.jsx)(m.c,{md:"6 mx-auto",children:Object(s.jsxs)("form",{id:"sign_form",onSubmit:this.signup.bind(this),children:[Object(s.jsx)("input",{type:"hidden",value:w()().format("MMM Do YY"),name:"created_at"}),Object(s.jsx)("p",{className:"h4 text-center mb-4",children:"Registration"}),Object(s.jsx)("label",{htmlFor:"defaultFormLoginEmailEx",className:"grey-text",children:"Your Username"}),this.state.usernameErr?Object(s.jsx)("p",{className:"text-danger",children:this.state.usernameErr}):"",Object(s.jsx)("input",{type:"text",id:"defaultFormLoginEmailEx",className:"form-control",name:"username"}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{htmlFor:"defaultFormLoginPasswordEx",className:"grey-text",children:"Your password"}),this.state.passErr?Object(s.jsxs)("p",{className:"text-danger",children:[" ",this.state.passErr]}):"",Object(s.jsx)("input",{type:"password",id:"defaultFormLoginPasswordEx",className:"form-control",name:"password"}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{htmlFor:"defaultFormLoginPasswordExRep",className:"grey-text",children:"Confirm Your password"}),this.state.conf_password?Object(s.jsx)("p",{className:"text-danger",children:this.state.conf_password}):"",Object(s.jsx)("input",{type:"password",id:"defaultFormLoginPasswordExRep",className:"form-control",name:"conf_password"}),Object(s.jsxs)("div",{className:"text-center mt-4",children:[Object(s.jsx)(m.b,{color:"success",type:"submit",children:"Register"}),Object(s.jsx)(m.b,{color:"indigo",type:"button",onClick:this.login_screen.bind(this),children:"Already a member ?"})]})]})})})})}}]),n}(r.a.Component),v=n(30),E=n(10),S=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={isOpen:!1},e.toggleCollapse=function(){e.setState({isOpen:!e.state.isOpen})},e}return Object(j.a)(n,[{key:"render",value:function(){return Object(s.jsx)(v.a,{children:Object(s.jsxs)(m.q,{color:"default-color",dark:!0,expand:"md",children:[Object(s.jsxs)(m.r,{children:[Object(s.jsx)("strong",{className:"white-text",children:"Budget Tracker"}),Object(s.jsx)("br",{}),Object(s.jsxs)("small",{children:[Object(s.jsx)(m.g,{icon:"user",style:{marginRight:15}}),this.props.user]})]}),Object(s.jsx)(m.t,{onClick:this.toggleCollapse}),Object(s.jsx)(m.d,{id:"navbarCollapse3",isOpen:this.state.isOpen,navbar:!0,children:Object(s.jsx)(m.s,{right:!0,children:Object(s.jsx)(m.o,{children:Object(s.jsx)(m.p,{to:"#!",onClick:this.props.logout,children:"Logout"})})})})]})})}}]),n}(a.Component),N=n(33),C=n(92),_=n.n(C),k=(n(148),function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={modal:!1,startDate:new Date},e.toggle=function(){e.setState({modal:!e.state.modal})},e.handleChange=function(){e.props.entryAdded()},e.addEntry=function(t){t.preventDefault();var n=new FormData(t.target),s={};n.forEach((function(e,t){s[t]=e})),s.paid_at=w()(e.state.startDate).format("MMM Do YY"),s!=={}&&x.a.post("/add_spending",s).then((function(t){"Spending added successfully"===t.data?(e.handleChange(),O.a.fire({icon:"success",title:"Spending added successfully",confirmButtonText:"Continue"}).then((function(t){if(!t.isConfirmed)return!1;e.toggle()}))):O.a.fire({icon:"error",title:"Something went wrong with registration, please try again.",text:"".concat(t.data)})}))},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(m.b,{onClick:this.toggle,children:"Add Entry"}),Object(s.jsxs)(m.j,{isOpen:this.state.modal,toggle:this.toggle,children:[Object(s.jsx)(m.m,{toggle:this.toggle,children:"Add Spending Entry"}),Object(s.jsxs)("form",{onSubmit:this.addEntry.bind(this),children:[Object(s.jsxs)(m.k,{children:[Object(s.jsx)("input",{type:"hidden",name:"username",value:this.props.user}),Object(s.jsx)("label",{htmlFor:"item",className:"grey-text",children:"Item"}),Object(s.jsx)("input",{type:"text",id:"item",name:"item",className:"form-control"}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{htmlFor:"price",className:"grey-text",children:"Cost"}),Object(s.jsx)("input",{type:"number",name:"price",id:"price",className:"form-control"}),Object(s.jsx)("label",{htmlFor:"date",className:"grey-text",children:"Date"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"hidden",name:"paid_at",value:this.state.startDate}),Object(s.jsx)(_.a,{selected:this.state.startDate,onChange:function(t){return e.setState({startDate:t})}})]}),Object(s.jsxs)(m.l,{children:[Object(s.jsx)(m.b,{color:"secondary",onClick:this.toggle,children:"Close"}),Object(s.jsx)(m.b,{color:"primary",type:"submit",children:"Add entry"})]})]})]})]})}}]),n}(a.Component)),F=(n(85),function(e){return Object(s.jsx)(m.e,{children:Object(s.jsxs)("div",{className:"statisticRow",children:[Object(s.jsx)("h1",{className:"heading",children:"Spend Total: "}),Object(s.jsx)(m.g,{icon:"cash-register",className:"icon"}),Object(s.jsxs)("p",{children:["\u20ac ",e.totalAmount]})]})})}),D=function(e){var t=Object(a.useState)(null),n=Object(N.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(null),o=Object(N.a)(i,2),l=o[0],d=o[1],u=Object(a.useState)("1"),j=Object(N.a)(u,2),b=j[0],h=j[1],p=function(e){b!==e&&h(e)},g={columns:[{label:"_id",field:"_id",sort:"asc"},{label:"Item",field:"item",sort:"asc"},{label:"Cost",field:"price",sort:"asc"},{label:"Date",field:"paid_at",sort:"asc"}],rows:r},f=function(){x()({method:"POST",data:{username:e.user},withCredentials:!0,url:"/spending"}).then((function(e){if(e.data!=={}){var t=[],n={},s=[];e.data.forEach((function(e){e._id.length>10&&(e._id=e._id.substring(0,10)),n={_id:e._id,item:e.item,price:"\u20ac "+e.price,paid_at:e.paid_at},s.push(e.price),t.push(n)}));var a=s.reduce((function(e,t){return e+t}),0);setTimeout((function(){d(a)}),1e3),c([].concat(t))}else O.a.fire({icon:"error",title:"Error with getting entries, please try again later."})}))};return Object(a.useEffect)((function(){f()}),[]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsxs)(m.e,{children:[Object(s.jsxs)(m.n,{className:"nav-tabs mt-5",children:[Object(s.jsx)(m.o,{children:Object(s.jsx)(m.p,{link:!0,to:"#",active:"1"===b,onClick:function(){return p("1")},role:"tab",children:"Spending Breakdown"})}),Object(s.jsx)(m.o,{children:Object(s.jsx)(m.p,{link:!0,to:"#",active:"2"===b,onClick:function(){return p("2")},role:"tab",children:"Statistics"})})]}),Object(s.jsxs)(m.x,{activeItem:b,children:[Object(s.jsxs)(m.y,{tabId:"1",role:"tabpanel",children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{style:{marginRight:15,marginTop:25},children:"Spending Breakdown"}),Object(s.jsx)(k,{user:e.user,entryAdded:f})]}),Object(s.jsx)("br",{}),Object(s.jsx)(m.f,{responsive:!0,striped:!0,bordered:!0,small:!0,data:g,paging:!0,sortable:!1,info:!0})]}),Object(s.jsx)(m.y,{tabId:"2",role:"tabpanel",children:Object(s.jsx)(F,{totalAmount:l})})]})]})]})},L=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).logout=function(){x()({method:"post",url:"/logout",withCredentials:!0}).then((function(e){window.location="/login"}))},s.getUser=function(){x()({method:"GET",withCredentials:!0,url:"/user"}).then((function(e){""!==e.data?(s.setState({data:e.data}),s.setState({auth:!0})):(O.a.fire({icon:"error",title:"Error with authentication, please try again later."}),setTimeout((function(){s.logout()}),2e3))}))},s.state={data:null,auth:!1},s}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"render",value:function(){return Object(s.jsx)("div",{children:this.state.auth?Object(s.jsxs)("div",{children:[Object(s.jsx)(S,{user:this.state.data.username,logout:this.logout}),Object(s.jsx)(D,{user:this.state.data.username})]}):""})}}]),n}(r.a.Component),P=function(){var e=Object(a.useState)(""),t=Object(N.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(N.a)(c,2),o=i[0],l=i[1];return Object(s.jsx)(m.e,{className:"signup_cont",children:Object(s.jsx)(m.w,{className:"signup_row",children:Object(s.jsx)(m.c,{md:"6 mx-auto",children:Object(s.jsxs)("form",{id:"sign_form",children:[Object(s.jsx)("p",{className:"h4 text-center mb-4",children:"Login"}),Object(s.jsx)("label",{htmlFor:"defaultFormLoginEmailEx",className:"grey-text",children:"Your Username"}),Object(s.jsx)("input",{type:"text",id:"defaultFormLoginEmailEx",className:"form-control",name:"username",onChange:function(e){return r(e.target.value)}}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{htmlFor:"defaultFormLoginPasswordEx",className:"grey-text",children:"Your password"}),Object(s.jsx)("input",{type:"password",id:"defaultFormLoginPasswordEx",className:"form-control",name:"password",onChange:function(e){return l(e.target.value)}}),Object(s.jsx)("br",{}),Object(s.jsx)("div",{className:"text-center mt-4",children:Object(s.jsx)(m.b,{color:"success",type:"submit",onClick:function(e){return function(e){e.preventDefault(),x()({method:"POST",data:{username:n,password:o},withCredentials:!0,url:"/login"}).then((function(e){"No user exists"===e.data?O.a.fire({icon:"error",title:"Something went wrong with registration, please try again.",text:"".concat(e.data)}):window.location="/dashboard"}))}(e)},children:"Login"})})]})})})})},A=function(){return Object(s.jsx)(v.a,{children:Object(s.jsxs)(E.c,{children:[Object(s.jsx)(E.a,{exact:!0,path:"/",component:y}),Object(s.jsx)(E.a,{exact:!0,path:"/dashboard",component:L}),Object(s.jsx)(E.a,{exact:!0,path:"/login",component:P})]})})};i.a.render(Object(s.jsx)(A,{}),document.querySelector("#root"))},85:function(e,t,n){}},[[191,1,2]]]);
//# sourceMappingURL=main.f4a0f7c0.chunk.js.map